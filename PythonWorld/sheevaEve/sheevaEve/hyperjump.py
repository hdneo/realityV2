import struct
import time
import random


class HyperJump:
    
    def __init__(self):
#        self.jumpID=[]
 #       self.jumpID.append(4625)
  #      self.jumpID.append(4881)
   #     self.currentID=0
        self.lastJumpID = 4625
        self.magic = 679736.5625
        self.randomid = 1234
        
    
    def processHyperJump(self,x,y,z,destX,destY,destZ,height,last4):
        
        hyperjumpP=[]

        #hyperjumpP.append("\x82\x76\xf3\x25\x49\x03\x02\x00\x03\x09\x08\x00\x0f\xf8\x6d\x46\xfa\x98\x43\x44\x27\xd2\x51\xc6\x69\xf0\x83\x28\xff\x01\x64\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x08\x41\x6e\x64\x65\x72\x73\x6f\x6e\x06\x54\x68\x6f\x6d\x61\x73\xff\x04\x80\x73\x1a\xe9\x82\x80\x60\x04\x00\x02\x8e\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x8f\x01\x00\x02\x00\x2a\x03\x02\xff\x28\x0a\x32\x00\xf0\x20\x46\x04\x00\x8e\x16\x84\x28\x00\x00\x00\x60\x50\x85\xd6\x40\x00\x00\x00\x00\x00\x7e\xa3\x40\x00\x00\x00\x80\x25\xda\xc9\xc0\x00\xff\x00\x00\x00\x00\x00\xf7\x00\x00\x00\xe3\x00\x00\x00\x00\x00\x28\x0a\xff\x00\x31\x5e\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x3f\x11\x00\x00\x00\x4b\xb1\x00\x00\x71\x02\x00\x00\x3f\x00\x00\x00\x01\x22\x00\x00\x00\x00\x00\x00\x00\x05\x00\x01\x00\x04\x0f\xf8\x6d\x46\xfa\x98\x43\x44\x27\xd2\x51\xc6\x00\x00")
        #hyperjumpP.append("\x02\x03\x02\x00\x03\x08\x89\x91\x6f\x46\x73\x74\xac\x44\x1a\xc8\x51\xc6\xf6\xf0\x83\x28\xff\x01\x64\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x08\x41\x6e\x64\x65\x72\x73\x6f\x6e\x06\x54\x68\x6f\x6d\x61\x73\xff\x04\x80\x73\x1a\xe9\x82\x80\x60\x04\x00\x02\x8e\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x8f\x01\x00\x02\x00\x2a\x03\x02\xff\x28\x0a\x32\x00\xf0\x20\x46\x04\x00\x8e\x16\x84\x28\x00\x00\x00\x60\x50\x85\xd6\x40\x00\x00\x00\x00\x00\x7e\xa3\x40\x00\x00\x00\x80\x25\xda\xc9\xc0\x00\xff\x00\x00\x00\x00\x00\xf7\x00\x00\x00\xe3\x00\x00\x00\x00\x00\x28\x0a\xff\x00\x31\x5e\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x3f\x11\x00\x00\x00\x4b\xb1\x00\x00\x71\x02\x00\x00\x3f\x00\x00\x00\x01\x22\x00\x00\x00\x00\x00\x00\x00\x05\x00\x01\x00\x04\x89\x91\x6f\x46\x73\x74\xac\x44\x1a\xc8\x51\xc6\x00\x00")
        #hyperjumpP.append("\x02\x03\x02\x00\x03\x09\x00\x00\xd5\xd1\xb1\x46\x00\xf0\x1b\x45\xaa\xee\x4e\xc6\xff\x18\x84\x28\xff\x01\x64\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x08\x41\x6e\x64\x65\x72\x73\x6f\x6e\x06\x54\x68\x6f\x6d\x61\x73\xff\x04\x80\x73\x1a\xe9\x82\x80\x60\x04\x00\x02\x8e\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x8f\x01\x00\x02\x00\x2a\x03\x02\xff\x28\x0a\x32\x00\xf0\x20\x46\x14\x00\x9a\x18\x84\x28\x00\x00\x00\xa0\x3a\x3a\xd6\x40\x00\x00\x00\x00\x00\x7e\xa3\x40\x00\x00\x00\x40\xd5\xdd\xc9\xc0\x00\xff\x00\x00\x00\x00\x00\xf7\x00\x00\x00\xf7\x00\x00\x00\x00\x00\x28\x0a\xff\x00\x31\x5e\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x3f\x11\x00\x00\x00\x4b\xb1\x00\x00\x71\x02\x00\x00\x3f\x00\x00\x00\x01\x22\x00\x00\x00\x00\x00\x00\x00\x05\x00\x01\x00\x04\xd5\xd1\xb1\x46\x00\xf0\x1b\x45\xaa\xee\x4e\xc6\x00\x00")
        #hyperjumpP.append("\x02\x03\x02\x00\x03\x09\x00\x00\xd5\xd1\xb1\x46\x00\xf0\x1b\x45\xaa\xee\x4e\xc6\x6d\x19\x84\x28\xff\x01\x64\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x08\x41\x6e\x64\x65\x72\x73\x6f\x6e\x06\x54\x68\x6f\x6d\x61\x73\xff\x04\x80\x73\x1a\xe9\x82\x80\x60\x04\x00\x02\x8e\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x8f\x01\x00\x02\x00\x2a\x03\x02\xff\x28\x0a\x32\x00\xf0\x20\x46\x14\x00\x9a\x18\x84\x28\x00\x00\x00\xa0\x3a\x3a\xd6\x40\x00\x00\x00\x00\x00\x7e\xa3\x40\x00\x00\x00\x40\xd5\xdd\xc9\xc0\x00\xff\x00\x00\x00\x00\x00\xf7\x00\x00\x00\xf7\x00\x00\x00\x00\x00\x28\x0a\xff\x00\x31\x5e\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x3f\x11\x00\x00\x00\x4b\xb1\x00\x00\x71\x02\x00\x00\x3f\x00\x00\x00\x01\x22\x00\x00\x00\x00\x00\x00\x00\x00\x00")


        hyperjumpP.append("\x82<a>\x03\x02\x00\x03\x09\x08\x00<x><y><z>\xff\xff\x84\x28\xff\x01\x64\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x08\x41\x6e\x64\x65\x72\x73\x6f\x6e\x06\x54\x68\x6f\x6d\x61\x73\xff\xe0\x18\x40\x0c\x41\x05\xe0\x02\x04\x00\xcd\x01\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x8f\x01\x00\x02\x00\x2a\x03\x02\xff\x28\x0a\x32\x00\xf0\x20\x46\x04\x00<lastJumpID>\x84\x28<xDest><yDest><zDest>\x00\xff\x00\x00\x00\x00\x00\xf7\x00\x00\x00\xe7\x00\x00\x00\x00\x00\x28\x0a\xff\x00\x31\x5e\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x3f\x11\x00\x00\x00\x4b\xb1\x00\x00\x71\x02\x00\x00\x3f\x00\x00\x00\x00\x22\x00\x00\x00\x00\x00\x00\x00\x05\x00\x01\x00\x04<x><y><z>\x00\x00")
        

        
        #hyperjumpP.append("\x02\x03\x02\x00\x03\x08\x3a\x91\x73\x46\x34\x62\x2f\x45\xf8\xae\x51\xc6\x5d\xf2\x83\x28\xff\x01\x64\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x08\x41\x6e\x64\x65\x72\x73\x6f\x6e\x06\x54\x68\x6f\x6d\x61\x73\xff\x04\x80\x73\x1a\xe9\x82\x80\x60\x04\x00\x02\x8e\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x8f\x01\x00\x02\x00\x2a\x03\x02\xff\x28\x0a\x32\x00\xf0\x20\x46\x04\x00\x8e\x16\x84\x28\x00\x00\x00\x60\x50\x85\xd6\x40\x00\x00\x00\x00\x00\x7e\xa3\x40\x00\x00\x00\x80\x25\xda\xc9\xc0\x00\xff\x00\x00\x00\x00\x00\xf7\x00\x00\x00\xe3\x00\x00\x00\x00\x00\x28\x0a\xff\x00\x31\x5e\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x3f\x11\x00\x00\x00\x4b\xb1\x00\x00\x71\x02\x00\x00\x3f\x00\x00\x00\x01\x22\x00\x00\x00\x00\x00\x00\x00\x00\x00")
        
        #hyperjumpP.append("\x82\x9a\xf3\x25\x49\x03\x02\x00\x03\x08<x><y><z>\x00\x00\x83\x28\xff\x01\x64\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x08\x41\x6e\x64\x65\x72\x73\x6f\x6e\x06\x54\x68\x6f\x6d\x61\x73\xff\xe0\x18\x40\x0c\x41\x05\xe0\x02\x04\x00\xcd\x01\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x8f\x01\x00\x02\x00\x2a\x03\x02\xff\x28\x0a\x32\x00\xf0\x20\x46\x04\x00<lastJumpID>\x84\x28<xDest><yDest><zDest>\x00\xff\x00\x00\x00\x00\x00\xf7\x00\x00\x00\xeb\x00\x00\x00\x00\x00\x28\x0a\xff\x00\x31\x5e\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x3f\x11\x00\x00\x00\x4b\xb1\x00\x00\x71\x02\x00\x00\x3f\x00\x00\x00\x00\x22\x00\x00\x00\x00\x00\x00\x00\x05\x00\x01\x00\x04<x><y><z>\x00\x00")
        
        #hyperjumpP.append("\x82\xbf\xf3\x25\x49\x03\x02\x00\x03\x08<x><y><z>\x00\x00\x84\x28\xff\x01\x64\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x08\x41\x6e\x64\x65\x72\x73\x6f\x6e\x06\x54\x68\x6f\x6d\x61\x73\xff\xe0\x18\x40\x0c\x41\x05\xe0\x02\x04\x00\xcd\x01\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x8f\x01\x00\x02\x00\x2a\x03\x02\xff\x28\x0a\x32\x00\xf0\x20\x46\x04\x00<lastJumpID>\x84\x28<xDest><yDest><zDest>\x00\xff\x00\x00\x00\x00\x00\xf7\x00\x00\x00\xf2\x00\x00\x00\x00\x00\x28\x0a\xff\x00\x31\x5e\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x80\x3f\x11\x00\x00\x00\x4b\xb1\x00\x00\x71\x02\x00\x00\x3f\x00\x00\x00\x00\x22\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x04<x><y><z>\x00\x00")
       
        
        for i in range(0,len(hyperjumpP)):

            hyperjumpP[i] = hyperjumpP[i].replace("<random>",struct.pack("f",(self.magic)))
            hyperjumpP[i] = hyperjumpP[i].replace("<a>",struct.pack("l",int(time.time())+5))
            
            hyperjumpP[i] = hyperjumpP[i].replace("<x>",struct.pack("f",x))
            hyperjumpP[i] = hyperjumpP[i].replace("<y>",struct.pack("f",y))
            hyperjumpP[i] = hyperjumpP[i].replace("<z>",struct.pack("f",z))

            hyperjumpP[i] = hyperjumpP[i].replace("<height>",height)
            hyperjumpP[i] = hyperjumpP[i].replace("<last4>",last4)
            
            hyperjumpP[i] = hyperjumpP[i].replace("<xDest>",destX)
            hyperjumpP[i] = hyperjumpP[i].replace("<yDest>",destY)
            hyperjumpP[i] = hyperjumpP[i].replace("<zDest>",destZ)

            self.lastJumpID = self.lastJumpID+1
            self.randomid = self.randomid+1 
            hyperjumpP[i] = hyperjumpP[i].replace("<lastJumpID>",struct.pack("h",self.lastJumpID))
            hyperjumpP[i] = hyperjumpP[i].replace("<randomID>",struct.pack("h",self.randomid))        
            x=x+0.001
            y=y+0.001
            z=z+0.001            
        return (hyperjumpP ,struct.unpack("d",destX)[0],struct.unpack("d",destY)[0],struct.unpack("d",destZ)[0])
